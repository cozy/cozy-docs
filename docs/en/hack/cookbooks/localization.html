<!DOCTYPE html><!--[if lte IE 7]> <html class="no-js ie67 ie678" lang="en"> <![endif]-->
<!--[if IE 8]> <html class="no-js ie8 ie678" lang="en"> <![endif]-->
<!--[if IE 9]> <html class="no-js ie9" lang="en"> <![endif]-->
<html lang="en">
  <head>
    <meta charset="utf-8"><!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <link rel="shortcut icon" href="/cozy-docs/assets/images/favicon.png">
    <title>Localize your applications
    </title><link  rel="stylesheet" href="/cozy-docs/vendors/css/knacss.css" /><link  rel="stylesheet" href="/cozy-docs/vendors/css/sunburst.css" /><link  rel="stylesheet" href="/cozy-docs/assets/css/main.css" />
  </head>
  <body>
    <div class="navbar fixed"><a href="/en/" class="nav-logo"><img src="/cozy-docs/assets/images/cozy-logo-docs.svg"></a>
      <ul class="subtitle">
        <li><a href="/en/hack/getting-started/">Getting started</a>
          <ul class="dropdown-menu">
            <li><a href="/en/hack/getting-started/setup-environment.html">Setting up the environment</a></li>
            <li><a href="/en/hack/getting-started/first-app.html">Your first app in 30 minutes</a></li>
            <li><a href="/en/hack/getting-started/architecture-overview.html">Understand the Cozy Architecture</a></li>
            <li><a href="/en/hack/getting-started/play-with-data-system.html">Play with the Data System</a></li>
            <li><a href="/en/hack/getting-started/discover-americano.html">Discover Americano</a></li>
            <li><a href="/en/hack/getting-started/learn-single-page-app-way.html">Learn the Single Page App Way</a></li>
          </ul>
        </li>
        <li><a href="/en/hack/cookbooks/" class="selected">Cookbooks</a>
          <ul class="dropdown-menu">
            <li><a href="/en/hack/cookbooks/data-system.html">The Data System API</a></li>
            <li><a href="/en/hack/cookbooks/controller.html">The Controller API</a></li>
            <li><a href="/en/hack/cookbooks/data-system-odm.html">The ODM for Data System API</a></li>
            <li><a href="/en/hack/cookbooks/understanding-dev-environment.html">Understanding Cozy's development environment</a></li>
            <li><a href="/en/hack/cookbooks/deploy.html">Deploy your application</a></li>
            <li><a href="/en/hack/cookbooks/localization.html">Localize your applications</a></li>
            <li><a href="/en/hack/cookbooks/debugging.html">Debug your application</a></li>
            <li><a href="/en/hack/cookbooks/debugging-production.html">Debug in production environment</a></li>
            <li><a href="/en/hack/cookbooks/nodemon-server-auto-refresh-on-change.html">Using nodemon to auto-refresh the server on code change</a></li>
            <li><a href="/en/hack/cookbooks/connect-a-device.html">Connect a device to a Cozy</a></li>
            <li><a href="/en/hack/cookbooks/components.html">Components</a></li>
            <li><a href="/en/hack/cookbooks/authentication-authorization-workflows.html">Authentication and Authorization workflows</a></li>
            <li><a href="/en/hack/cookbooks/encryption.html">Encryption management</a></li>
          </ul>
        </li>
        <li><a href="/en/hack/application-skeletons/">Application Skeletons</a>
          <ul class="dropdown-menu">
            <li><a href="/en/hack/application-skeletons/cozy-official.html">Official Cozy skeleton</a></li>
          </ul>
        </li>
        <li><a href="/en/hack/contributing/">Contributing</a>
        </li>
        <li><a href="/en/hack/releases/">Releases</a>
          <ul class="dropdown-menu">
            <li><a href="/en/hack/releases/patch-notes-17.html">Patch notes 2015/12/02</a></li>
            <li><a href="/en/hack/releases/patch-notes-18.html">Last release note</a></li>
          </ul>
        </li>
      </ul>
      <ul class="navigation">
        <li><a href="/en/host/install/">Install</a>
        </li>
        <li><a href="/en/mobile/files.html">Sync</a>
        </li>
        <li><a href="https://dev.cozy.io" class="selected">Dev</a>
        </li>
      </ul>
    </div>
    <div class="wrapper">
      <div id="main" role="main" class="mod pam selected"><h1 id="localize-your-applications">Localize your applications</h1>
<p>To improve your application user experience you might want to translate it (by yourself or by outsourcing contribution). This cookbook will provide you the information you need and give you the guidelines we use in Cozy apps. You are free to use your own, but if everyone follows the same rules contributions will be eased.</p>
<h2 id="making-your-app-translatable">Making your app translatable</h2>
<p>We didn&#39;t invent anything new here, we just made helper to ease the developer&#39;s life.
We&#39;ll use the final code of our tutorial to illustrate this cookbook. You can find it <a href="https://github.com/cozy/cozy-tutorial/tree/spa-final">here</a>.</p>
<p>NB: you can find the code of this tutorial <a href="https://github.com/cozy/cozy-tutorial/tree/localization">here</a></p>
<p>First you need to add Polyglot to your client&#39;s vendor. <a href="http://airbnb.github.io/polyglot.js/">Polyglot</a> is a &quot;tiny l18n helper library written in JavaScript&quot;. It supports interpolation and pluralization.</p>
<ul>
<li>download it and put it inside the client/vendors/scripts/ folder</li>
<li>make sure brunch is running, it will automatically add the library to the vendor.js file</li>
</ul>
<p>Next, create your &quot;locales&quot; files (one for each language) in your client. As an example, you can see how we did it for the <a href="https://github.com/cozy/cozy-home/tree/master/client/app/locales">&quot;Home&quot; application</a>.
We&#39;ll have English and French for our bookmark tutorial app:</p>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-comment">// client/app/locales/en.js</span>
<span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-string">"main title"</span>: <span class="hljs-string">"Welcome on My Own Bookmarks"</span>,
    <span class="hljs-string">"main description"</span>: <span class="hljs-string">"This application will help you manage your bookmarks!"</span>,
    <span class="hljs-string">"form title label"</span>: <span class="hljs-string">"Title"</span>,
    <span class="hljs-string">"form url label"</span>: <span class="hljs-string">"Url"</span>,
    <span class="hljs-string">"form submit button"</span>: <span class="hljs-string">"Add a new bookmark"</span>,
    <span class="hljs-string">"delete button"</span>: <span class="hljs-string">"delete"</span>
}
</code></pre>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-comment">// client/app/locales/fr.js</span>
<span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-string">"main title"</span>: <span class="hljs-string">"Bienvenue sur My Own Bookmarks"</span>,
    <span class="hljs-string">"main description"</span>: <span class="hljs-string">"Cette application vous permet de g√©rer vos marque-pages !"</span>,
    <span class="hljs-string">"form title label"</span>: <span class="hljs-string">"Titre"</span>,
    <span class="hljs-string">"form url label"</span>: <span class="hljs-string">"Url"</span>,
    <span class="hljs-string">"form submit button"</span>: <span class="hljs-string">"Ajouter un nouveau marque-page"</span>,
    <span class="hljs-string">"delete button"</span>: <span class="hljs-string">"supprimer"</span>
}
</code></pre>
<p>Each localization file is a key-value list. The key should always be the same across the file. We&#39;ll see how we use it later. We have rules to name the keys, you can find them at the <a href="#guidelines">end of this page</a>.</p>
<p>Then bootstrap Polyglot in your application:</p>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-comment">// client/app/initialize.js</span>

$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> app = <span class="hljs-built_in">require</span>(<span class="hljs-string">'application'</span>);

    <span class="hljs-keyword">var</span> locale = <span class="hljs-string">'en'</span>; <span class="hljs-comment">// default locale</span>

    <span class="hljs-comment">// we'll need to tweak the server to allow this</span>
    $.ajax(<span class="hljs-string">'cozy-locale.json'</span>, {
        <span class="hljs-attr">success</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>{
            locale = data.locale
            initializeLocale(locale);
        },
        <span class="hljs-attr">error</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            initializeLocale(locale);
        }
    });

    <span class="hljs-comment">// let's define a function to initialize Polyglot</span>
    <span class="hljs-keyword">var</span> initializeLocale = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">locale</span>) </span>{
        <span class="hljs-keyword">var</span> locales = {};
        <span class="hljs-keyword">try</span> {
            locales = <span class="hljs-built_in">require</span>(<span class="hljs-string">'locales/'</span> + locale);
        }
        <span class="hljs-keyword">catch</span>(err) {
            locales = <span class="hljs-built_in">require</span>(<span class="hljs-string">'locales/en'</span>);
        }

        <span class="hljs-keyword">var</span> polyglot = <span class="hljs-keyword">new</span> Polyglot();
        <span class="hljs-comment">// we give polyglot the data</span>
        polyglot.extend(locales);

        <span class="hljs-comment">// handy shortcut</span>
        <span class="hljs-built_in">window</span>.t = polyglot.t.bind(polyglot);
        app.initialize();
    };
});
</code></pre>
<p>Now we must make the &quot;cozy-locale.json&quot; resource available on the server. We have a helper for that:</p>
<pre class="highlight"><code class="hljs bash">npm install cozy-i18n-helper --save
</code></pre>
<p>Then add the following to the &#39;common&#39; section of your configuration (if you are using americano or express):</p>
<pre class="highlight"><code class="hljs javascript"><span class="hljs-comment">// server/config.js</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">'cozy-i18n-helper'</span>).middleware
</code></pre>
<p>It automatically retrieves the locale data of the cozy&#39;s user and create the route that will allow the client the get it. Don&#39;t forget to add the &quot;CozyInstance&quot; doctype to your application&#39;s permission, or you will get errors.</p>
<p>Now you can change all the templates and view using the &quot;t&quot; function. Let&#39;s change <code>client/app/templates/home.hade</code> as an example:</p>
<pre class="highlight"><code class="hljs xml">h1= t('main title')
p= t('main description')

form
    label= t('form title label')  + ':'
    input(type="text", name="title")
    label= t('form url label') + ':'
    input(type="text", name="url")
    input(id="add-bookmark", type="submit", value="#{t('form submit button')}")

ul
</code></pre>
<p>To learn all the great thing Polyglot can do (interpolation and pluralization), please <a href="http://airbnb.github.io/polyglot.js/">read its documentation</a>.</p>
<p>If you want to test everything is working, go to <a href="http://localhost:9104/#account">http://localhost:9104/#account</a> and change the language.</p>
<h2 id="summary-for-translator-contributors">Summary for translator contributors</h2>
<p>If you are not a developer, but still want to help the community by adding translation, here what should know/do. Let&#39;s say you want to add the German language to an application.</p>
<ul>
<li>get the application you want to translate on <a href="https://github.com/cozy/">Github</a></li>
<li>the only technical requirement is git. If you don&#39;t know it and still want to help, we&#39;ll find another way (contact[at]cozycloud.cc).</li>
<li>check the client/app/locales folder<ul>
<li>if there is a &quot;de.js&quot; or &quot;de.coffee&quot; file, open it and make your changes</li>
<li>if there isn&#39;t, create it on the existing model and make your changes</li>
</ul>
</li>
<li>commit your work</li>
<li>submit a pull request on github</li>
</ul>
<h2 id="localization-guidelines">Localization guidelines</h2>
<p>The localization guidelines can be found with all Cozy&#39;s guidelines: <a href="https://github.com/cozy/cozy-guidelines#localisation">https://github.com/cozy/cozy-guidelines#localisation</a>.</p>

      </div>
      <footer id="footer" role="contentinfo"><a href="https://github.com/cozy"><img src="/cozy-docs/assets/images/icons/icon-github.svg">Github</a><a href="irc://irc.freenode.net/cozycloud"><img src="/cozy-docs/assets/images/icons/icon-message.svg">IRC</a><a href="https://forum.cozy.io"><img src="/cozy-docs/assets/images/icons/icon-smiley.svg">Forum</a><a href="mailto:contact@cozycloud.cc"><img src="/cozy-docs/assets/images/icons/icon-mail.svg">Contact</a><a href="https://www.cozy.io"><img src="/cozy-docs/assets/images/icons/icon-cloud.svg">Cozy's site</a></footer>
    </div><script defer="defer"  src="/cozy-docs/vendors/javascripts/jquery-2.0.3.min.js"></script><script defer="defer"  src="/cozy-docs/vendors/javascripts/bootstrap.min.js"></script><script defer="defer"  src="/cozy-docs/assets/javascripts/main.js"></script>
    <script type="text/javascript">
      var _paq = _paq || [];
      _paq.push(['disableCookies']);
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
      var u="//piwik.cozycloud.cc/";
      _paq.push(['setTrackerUrl', u+'piwik.php']);
      _paq.push(['setSiteId', 7]);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    <noscript>
      <p><img src="https://piwik.cozycloud.cc/piwik.php?idsite=7" style="border:0" alt=""></p>
    </noscript>
  </body>
</html>